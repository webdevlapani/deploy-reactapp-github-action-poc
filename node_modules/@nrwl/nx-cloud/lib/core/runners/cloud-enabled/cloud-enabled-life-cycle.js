const a0_0x55cc=['Cannot\x20find\x20task\x20','statuses','filter','path','overrides','outputObfuscator','length','nodes','taskId','join','CloudEnabledLifeCycle','configuration','local-cache-kept-existing','MAX_CHARACTERS_FAILED_TASK','hash','getTerminalOutput','target','TRUNCATED\x0a\x0a','runContext','startsWith','endTime','scheduledTasks','readTerminalOutputFile','status','MAX_CHARACTERS_CACHED_TASK','npm:','node_modules','code','../../../utilities/nx-imports','toISOString','terminalOutput','hashDetails','scheduleTask','tasks','startTask','toString','endTasks','cacheableOperations','slice','indexOf','__esModule','endCommand','obfuscate','skipNxCache','find','cache-miss','collectTerminalOutput','push','runtime','implicitDeps','local-cache-hit','project','terminalOutputs','local-cache','params','cacheStatus','cacheDirectory','updateStartedTask'];(function(_0x30411b,_0x55cc05){const _0x46a9c7=function(_0x4f99fb){while(--_0x4f99fb){_0x30411b['push'](_0x30411b['shift']());}};_0x46a9c7(++_0x55cc05);}(a0_0x55cc,0x12e));const a0_0x46a9=function(_0x30411b,_0x55cc05){_0x30411b=_0x30411b-0x0;let _0x46a9c7=a0_0x55cc[_0x30411b];return _0x46a9c7;};'use strict';Object['defineProperty'](exports,a0_0x46a9('0x1c'),{'value':!![]});exports[a0_0x46a9('0x38')]=void 0x0;const path=require('path');const path_1=require(a0_0x46a9('0x31'));const fs_1=require('fs');const environment_1=require('../../../utilities/environment');const {appRootPath,unparse}=require(a0_0x46a9('0x10'));class CloudEnabledLifeCycle{constructor(_0xde5dc1,_0x3f86e2,_0x588649,_0x3f73e0,_0x4f83d2,_0x2ed529,_0x26327e){this['runContext']=_0xde5dc1;this['cacheDirectory']=_0x3f86e2;this[a0_0x46a9('0x1f')]=_0x588649;this[a0_0x46a9('0x22')]=_0x3f73e0;this[a0_0x46a9('0x19')]=_0x4f83d2;this[a0_0x46a9('0x33')]=_0x2ed529;this[a0_0x46a9('0x15')]=_0x26327e;}[a0_0x46a9('0x14')](_0x404e20){this[a0_0x46a9('0x6')][a0_0x46a9('0x9')][a0_0x46a9('0x23')](_0x404e20);}[a0_0x46a9('0x16')](_0x4a519e){const _0x382aae=Object['assign']({},_0x4a519e[a0_0x46a9('0x32')]||{});if(_0x4a519e[a0_0x46a9('0x4')][a0_0x46a9('0x39')]){_0x382aae[a0_0x46a9('0x39')]=_0x4a519e[a0_0x46a9('0x4')][a0_0x46a9('0x39')];}this[a0_0x46a9('0x15')]['push']({'taskId':_0x4a519e['id'],'startTime':new Date()[a0_0x46a9('0x11')](),'target':_0x4a519e['target'][a0_0x46a9('0x4')],'projectName':_0x4a519e['target'][a0_0x46a9('0x27')],'hash':_0x4a519e[a0_0x46a9('0x2')],'hashDetails':this['cleanUpHashDetails'](_0x4a519e[a0_0x46a9('0x13')]),'params':unparse(_0x382aae)[a0_0x46a9('0x37')]('\x20')});}['endTask'](_0xb95b4c,_0x27bf0d){let _0x295ea3;if(this['runContext'][a0_0x46a9('0x2f')][_0xb95b4c[a0_0x46a9('0x2')]]){_0x295ea3=this['runContext'][a0_0x46a9('0x2f')][_0xb95b4c[a0_0x46a9('0x2')]];}else{if(this['cacheableOperations'][a0_0x46a9('0x1b')](_0xb95b4c[a0_0x46a9('0x4')][a0_0x46a9('0x4')])>-0x1&&!this['skipNxCache']){_0x295ea3=a0_0x46a9('0x26');}else{_0x295ea3=a0_0x46a9('0x21');}}this[a0_0x46a9('0x2d')](_0xb95b4c,_0x27bf0d,_0x295ea3);}[a0_0x46a9('0x18')](_0x279f0e){for(let _0x2e111f of _0x279f0e){const _0x1b8f90=_0x2e111f[a0_0x46a9('0xb')]==='remote-cache'?'remote-cache-hit':_0x2e111f[a0_0x46a9('0xb')]===a0_0x46a9('0x29')||_0x2e111f[a0_0x46a9('0xb')]===a0_0x46a9('0x0')?a0_0x46a9('0x26'):'cache-miss';this['updateStartedTask'](_0x2e111f['task'],_0x2e111f[a0_0x46a9('0xf')],_0x1b8f90);}}[a0_0x46a9('0x1d')](){}['updateStartedTask'](_0x98f635,_0x5d8187,_0x4882f4){const _0xb6132a=this['tasks'][a0_0x46a9('0x20')](_0x1d3105=>_0x1d3105[a0_0x46a9('0x36')]===_0x98f635['id']);if(!_0xb6132a){throw new Error(a0_0x46a9('0x2e')+_0x98f635['id']);}_0xb6132a[a0_0x46a9('0x8')]=new Date()[a0_0x46a9('0x11')]();_0xb6132a[a0_0x46a9('0xb')]=_0x5d8187;_0xb6132a['params']=this[a0_0x46a9('0x33')][a0_0x46a9('0x1e')](_0xb6132a[a0_0x46a9('0x2a')]);_0xb6132a['cacheStatus']=_0x4882f4;if(this[a0_0x46a9('0x22')]){_0xb6132a['terminalOutput']=this[a0_0x46a9('0x3')](_0x98f635[a0_0x46a9('0x2')],_0xb6132a[a0_0x46a9('0x2b')],_0x5d8187);}}['getTerminalOutput'](_0x10b7fe,_0x2efb5f,_0x3b1f1e){let _0x5e1569;if(this[a0_0x46a9('0x2c')]){if(this[a0_0x46a9('0x2c')][a0_0x46a9('0x7')]('./')){_0x5e1569=(0x0,path_1[a0_0x46a9('0x37')])(appRootPath,this[a0_0x46a9('0x2c')]);}else{_0x5e1569=this[a0_0x46a9('0x2c')];}}else{_0x5e1569=(0x0,path_1['join'])(appRootPath,a0_0x46a9('0xe'),'.cache','nx');}try{const _0x4ecdbe=this['readTerminalOutputFile'](_0x5e1569,_0x10b7fe);const _0x1c9fc0=this[a0_0x46a9('0x33')]['obfuscate'](_0x4ecdbe);if(environment_1['NX_CLOUD_UNLIMITED_OUTPUT'])return _0x1c9fc0;const _0x43c591=_0x2efb5f===a0_0x46a9('0x21')?_0x3b1f1e===0x0?CloudEnabledLifeCycle['MAX_CHARACTERS_SUCCESSFUL_TASK']:CloudEnabledLifeCycle[a0_0x46a9('0x1')]:CloudEnabledLifeCycle[a0_0x46a9('0xc')];return _0x1c9fc0[a0_0x46a9('0x34')]>_0x43c591?a0_0x46a9('0x5')+_0x1c9fc0[a0_0x46a9('0x1a')](_0x1c9fc0[a0_0x46a9('0x34')]-_0x43c591):_0x1c9fc0;}catch(_0x40c383){return'';}}['cleanUpHashDetails'](_0x29c29e){const _0x260d9b={};Object['keys'](_0x29c29e[a0_0x46a9('0x35')])[a0_0x46a9('0x30')](_0x475455=>!_0x475455['startsWith'](a0_0x46a9('0xd')))['forEach'](_0x3b3269=>{_0x260d9b[_0x3b3269]=_0x29c29e['nodes'][_0x3b3269];});return{'nodes':_0x260d9b,'runtime':_0x29c29e[a0_0x46a9('0x24')],'implicitDeps':_0x29c29e[a0_0x46a9('0x25')]};}[a0_0x46a9('0xa')](_0x44956f,_0x448ebc){try{return(0x0,fs_1['readFileSync'])(path[a0_0x46a9('0x37')](_0x44956f,a0_0x46a9('0x28'),_0x448ebc))[a0_0x46a9('0x17')]();}catch(_0x323de6){try{return(0x0,fs_1['readFileSync'])(path[a0_0x46a9('0x37')](_0x44956f,_0x448ebc,a0_0x46a9('0x12')))[a0_0x46a9('0x17')]();}catch(_0x594479){return'';}}}}exports[a0_0x46a9('0x38')]=CloudEnabledLifeCycle;CloudEnabledLifeCycle[a0_0x46a9('0x1')]=0x30d40;CloudEnabledLifeCycle['MAX_CHARACTERS_SUCCESSFUL_TASK']=0x4e20;CloudEnabledLifeCycle[a0_0x46a9('0xc')]=0x4e20;