const a2_0x21ea=['map','api','runContext','fileStorage','VERBOSE_LOGGING','defineProperty','messages','retrieve','put','NX_CLOUD_DISTRIBUTED_EXECUTION_ID','../../../utilities/environment','.\x20Status\x20404.','value','__awaiter','hashUrls','requests','__esModule','status','storage','statuses','note','storeRequests','remote-cache-hit','store','apply','hash','waitForStoreRequestsToComplete','cacheError','axiosException','get','extractErrorMessage','reduce','then','next','response','Nx\x20Cloud:\x20Skipping\x20storing\x20','.\x20Read\x20only\x20token\x20is\x20used.','all','CloudRemoteCache','Nx\x20Cloud:\x20Cache\x20miss\x20'];(function(_0x4b8d6a,_0x21eafb){const _0x55112c=function(_0x2c4c21){while(--_0x2c4c21){_0x4b8d6a['push'](_0x4b8d6a['shift']());}};_0x55112c(++_0x21eafb);}(a2_0x21ea,0x1a1));const a2_0x5511=function(_0x4b8d6a,_0x21eafb){_0x4b8d6a=_0x4b8d6a-0x0;let _0x55112c=a2_0x21ea[_0x4b8d6a];return _0x55112c;};'use strict';var __awaiter=this&&this[a2_0x5511('0x24')]||function(_0x1bf809,_0x167b0e,_0xd3c674,_0x57f4e6){function _0x4412e4(_0x34d058){return _0x34d058 instanceof _0xd3c674?_0x34d058:new _0xd3c674(function(_0xebb755){_0xebb755(_0x34d058);});}return new(_0xd3c674||(_0xd3c674=Promise))(function(_0x28e19c,_0x1ea122){function _0x17a3d6(_0x48bae0){try{_0x157889(_0x57f4e6[a2_0x5511('0x10')](_0x48bae0));}catch(_0x2c37ef){_0x1ea122(_0x2c37ef);}}function _0x2d59a1(_0x631ba0){try{_0x157889(_0x57f4e6['throw'](_0x631ba0));}catch(_0x42c110){_0x1ea122(_0x42c110);}}function _0x157889(_0x535f15){_0x535f15['done']?_0x28e19c(_0x535f15[a2_0x5511('0x23')]):_0x4412e4(_0x535f15[a2_0x5511('0x23')])[a2_0x5511('0xf')](_0x17a3d6,_0x2d59a1);}_0x157889((_0x57f4e6=_0x57f4e6[a2_0x5511('0x7')](_0x1bf809,_0x167b0e||[]))['next']());});};Object[a2_0x5511('0x1c')](exports,a2_0x5511('0x27'),{'value':!![]});exports['CloudRemoteCache']=void 0x0;const environment_1=require(a2_0x5511('0x21'));const {output}=require('../../../utilities/nx-imports');class CloudRemoteCache{constructor(_0x43f47f,_0x454bf4,_0x14d8bc,_0x5503a0){this['messages']=_0x43f47f;this[a2_0x5511('0x18')]=_0x454bf4;this[a2_0x5511('0x19')]=_0x14d8bc;this[a2_0x5511('0x1a')]=_0x5503a0;this[a2_0x5511('0x4')]=[];}[a2_0x5511('0x1e')](_0x103e7b,_0x1b922b){var _0x410038;return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x5511('0x1d')][a2_0x5511('0xa')])return![];const _0x54935e=yield this['hashUrls'](_0x103e7b);if(!_0x54935e||!_0x54935e[a2_0x5511('0xc')]){if(environment_1[a2_0x5511('0x1b')]){output[a2_0x5511('0x3')]({'title':a2_0x5511('0x16')+_0x103e7b+'.'});}this[a2_0x5511('0x19')][a2_0x5511('0x2')][_0x103e7b]='cache-miss';return![];}try{yield this[a2_0x5511('0x1a')][a2_0x5511('0x1e')](_0x103e7b,_0x54935e[a2_0x5511('0xc')],_0x1b922b);this[a2_0x5511('0x19')][a2_0x5511('0x2')][_0x103e7b]=a2_0x5511('0x5');return!![];}catch(_0x546f41){const _0x5b6743=(_0x410038=_0x546f41[a2_0x5511('0xb')])!==null&&_0x410038!==void 0x0?_0x410038:_0x546f41;if(_0x5b6743[a2_0x5511('0x11')]&&_0x5b6743['response'][a2_0x5511('0x0')]===0x194){if(environment_1[a2_0x5511('0x1b')]){output['note']({'title':a2_0x5511('0x16')+_0x103e7b+a2_0x5511('0x22')});}}else{this[a2_0x5511('0x1d')][a2_0x5511('0xa')]=this['messages'][a2_0x5511('0xd')](_0x5b6743,a2_0x5511('0x1'));}this[a2_0x5511('0x19')][a2_0x5511('0x2')][_0x103e7b]='cache-miss';return![];}});}[a2_0x5511('0x6')](_0x3e6aa6,_0x30ff97){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x5511('0x1d')][a2_0x5511('0xa')])return![];const _0x49ff5a=Promise['resolve']()[a2_0x5511('0xf')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x14f3f6;const _0x56cd0e=yield this[a2_0x5511('0x25')](_0x3e6aa6);if(!_0x56cd0e)return![];if(!_0x56cd0e[a2_0x5511('0x1f')]){if(environment_1['VERBOSE_LOGGING']){output[a2_0x5511('0x3')]({'title':a2_0x5511('0x12')+_0x3e6aa6+a2_0x5511('0x13')});}return!![];}try{yield this['fileStorage'][a2_0x5511('0x6')](_0x3e6aa6,_0x56cd0e['put'],_0x30ff97);return!![];}catch(_0x381b1d){const _0x367559=(_0x14f3f6=_0x381b1d[a2_0x5511('0xb')])!==null&&_0x14f3f6!==void 0x0?_0x14f3f6:_0x381b1d;this[a2_0x5511('0x1d')][a2_0x5511('0xa')]=this['messages'][a2_0x5511('0xd')](_0x367559,'storage');return![];}}));this[a2_0x5511('0x4')]['push'](_0x49ff5a);return _0x49ff5a;});}[a2_0x5511('0x25')](_0xe7bc6b){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0xe7bc6b in this[a2_0x5511('0x19')][a2_0x5511('0x26')]){return(yield this[a2_0x5511('0x19')]['requests'][_0xe7bc6b])[_0xe7bc6b];}else{const _0x5609c7=this[a2_0x5511('0x19')]['scheduledTasks']['filter'](_0x2fc2ed=>!this[a2_0x5511('0x19')]['requests'][_0x2fc2ed[a2_0x5511('0x8')]])[a2_0x5511('0x17')](_0x48108c=>_0x48108c[a2_0x5511('0x8')]);if(_0x5609c7['indexOf'](_0xe7bc6b)===-0x1){_0x5609c7['push'](_0xe7bc6b);}const _0x4261f4=this[a2_0x5511('0x18')]['startRun'](environment_1[a2_0x5511('0x20')],_0x5609c7);_0x5609c7['forEach'](_0x2a617e=>{this['runContext'][a2_0x5511('0x26')][_0x2a617e]=_0x4261f4;});return(yield _0x4261f4)[_0xe7bc6b];}});}[a2_0x5511('0x9')](){return Promise[a2_0x5511('0x14')](this[a2_0x5511('0x4')])[a2_0x5511('0xf')](_0x1752d8=>_0x1752d8[a2_0x5511('0xe')]((_0x1f004d,_0x5bddd1)=>_0x1f004d&&_0x5bddd1,!![]));}}exports[a2_0x5511('0x15')]=CloudRemoteCache;