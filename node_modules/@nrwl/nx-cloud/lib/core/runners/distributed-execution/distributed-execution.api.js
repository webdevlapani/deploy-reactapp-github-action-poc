const a6_0xfc87=['../../../utilities/environment','response','/nx-cloud/executions/complete-run-group','createStartRequest','dteStatus','next','../../../utilities/axios','project','NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT','__awaiter','done','DistributedExecutionApi','maxParallel','defineProperty','mapRespToPerfEntry','exit','__esModule','createMetricRecorder','axiosException','post','error','RUNNER_FAILURE_PERF_ENTRY','hash','throw','../../../utilities/nx-imports','../../../utilities/metric-logger','start','recordMetric','agentCount','configuration','overrides','axiosMultipleTries','stopAgentsOnFailure','/nx-cloud/executions/status','message','false','join','target','data','value','completeRunGroupWithError','map','NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE','Workspace\x20is\x20disabled.\x20Cannot\x20perform\x20distributed\x20task\x20executions.','then','enabled','dteStart','apply','parallel','completeRunGroup','parseCommand','apiAxiosInstance'];(function(_0x453ea5,_0xfc874c){const _0x6d32af=function(_0x4f7ac0){while(--_0x4f7ac0){_0x453ea5['push'](_0x453ea5['shift']());}};_0x6d32af(++_0xfc874c);}(a6_0xfc87,0x187));const a6_0x6d32=function(_0x453ea5,_0xfc874c){_0x453ea5=_0x453ea5-0x0;let _0x6d32af=a6_0xfc87[_0x453ea5];return _0x6d32af;};'use strict';var __awaiter=this&&this[a6_0x6d32('0x22')]||function(_0x173335,_0x3740f4,_0x1ffdab,_0x568328){function _0x131ee9(_0x4d5712){return _0x4d5712 instanceof _0x1ffdab?_0x4d5712:new _0x1ffdab(function(_0x4f6bf7){_0x4f6bf7(_0x4d5712);});}return new(_0x1ffdab||(_0x1ffdab=Promise))(function(_0x5ace61,_0x1d9f59){function _0x4f4b3a(_0x3d47c0){try{_0x3debff(_0x568328[a6_0x6d32('0x1e')](_0x3d47c0));}catch(_0x38f719){_0x1d9f59(_0x38f719);}}function _0x820cfe(_0x1b9b07){try{_0x3debff(_0x568328[a6_0x6d32('0x30')](_0x1b9b07));}catch(_0xd6d69f){_0x1d9f59(_0xd6d69f);}}function _0x3debff(_0x3eb92c){_0x3eb92c[a6_0x6d32('0x23')]?_0x5ace61(_0x3eb92c[a6_0x6d32('0xc')]):_0x131ee9(_0x3eb92c[a6_0x6d32('0xc')])[a6_0x6d32('0x11')](_0x4f4b3a,_0x820cfe);}_0x3debff((_0x568328=_0x568328[a6_0x6d32('0x14')](_0x173335,_0x3740f4||[]))[a6_0x6d32('0x1e')]());});};Object[a6_0x6d32('0x26')](exports,a6_0x6d32('0x29'),{'value':!![]});exports[a6_0x6d32('0x1c')]=exports[a6_0x6d32('0x24')]=void 0x0;const axios_1=require(a6_0x6d32('0x1f'));const environment_1=require(a6_0x6d32('0x19'));const metric_logger_1=require(a6_0x6d32('0x32'));const {output,unparse}=require(a6_0x6d32('0x31'));class DistributedExecutionApi{constructor(_0x4cdac9){this[a6_0x6d32('0x18')]=(0x0,axios_1['createApiAxiosInstance'])(_0x4cdac9);}[a6_0x6d32('0x33')](_0x4a1ecb){var _0x5b0abb;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x41f8fa=(0x0,metric_logger_1[a6_0x6d32('0x2a')])(a6_0x6d32('0x13'));let _0x2743f2;try{_0x2743f2=yield(0x0,axios_1['axiosMultipleTries'])(()=>this[a6_0x6d32('0x18')][a6_0x6d32('0x2c')]('/nx-cloud/executions/start',_0x4a1ecb));_0x41f8fa[a6_0x6d32('0x0')]((0x0,metric_logger_1[a6_0x6d32('0x27')])(_0x2743f2));}catch(_0x2a92d8){_0x41f8fa[a6_0x6d32('0x0')](((_0x5b0abb=_0x2a92d8===null||_0x2a92d8===void 0x0?void 0x0:_0x2a92d8['axiosException'])===null||_0x5b0abb===void 0x0?void 0x0:_0x5b0abb[a6_0x6d32('0x1a')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x2a92d8[a6_0x6d32('0x2b')][a6_0x6d32('0x1a')]):metric_logger_1[a6_0x6d32('0x2e')]);throw _0x2a92d8;}if(!_0x2743f2['data'][a6_0x6d32('0x12')]){throw new Error(a6_0x6d32('0x10'));}if(_0x2743f2[a6_0x6d32('0xb')][a6_0x6d32('0x2d')]){throw new Error(_0x2743f2[a6_0x6d32('0xb')][a6_0x6d32('0x2d')]);}return _0x2743f2[a6_0x6d32('0xb')]['id'];});}['status'](_0xf8edd6){var _0x166268;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x30ae36=(0x0,metric_logger_1[a6_0x6d32('0x2a')])(a6_0x6d32('0x1d'));try{const _0x3472e3=yield(0x0,axios_1[a6_0x6d32('0x4')])(()=>this[a6_0x6d32('0x18')][a6_0x6d32('0x2c')](a6_0x6d32('0x6'),{'id':_0xf8edd6}));_0x30ae36[a6_0x6d32('0x0')]((0x0,metric_logger_1[a6_0x6d32('0x27')])(_0x3472e3));return _0x3472e3['data'];}catch(_0xf36c07){_0x30ae36[a6_0x6d32('0x0')](((_0x166268=_0xf36c07===null||_0xf36c07===void 0x0?void 0x0:_0xf36c07['axiosException'])===null||_0x166268===void 0x0?void 0x0:_0x166268[a6_0x6d32('0x1a')])?(0x0,metric_logger_1[a6_0x6d32('0x27')])(_0xf36c07[a6_0x6d32('0x2b')]['response']):metric_logger_1[a6_0x6d32('0x2e')]);output[a6_0x6d32('0x2d')]({'title':_0xf36c07[a6_0x6d32('0x7')]});process[a6_0x6d32('0x28')](0x1);}});}[a6_0x6d32('0xd')](_0x89aca7,_0x55b619){var _0x30a27d;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3171f0=(0x0,metric_logger_1[a6_0x6d32('0x2a')])(a6_0x6d32('0x16'));try{const _0x7c7023=yield(0x0,axios_1[a6_0x6d32('0x4')])(()=>this[a6_0x6d32('0x18')][a6_0x6d32('0x2c')](a6_0x6d32('0x1b'),{'runGroup':_0x89aca7,'criticalErrorMessage':_0x55b619}),0x3);_0x3171f0[a6_0x6d32('0x0')]((0x0,metric_logger_1[a6_0x6d32('0x27')])(_0x7c7023));}catch(_0x4f2cd9){_0x3171f0[a6_0x6d32('0x0')](((_0x30a27d=_0x4f2cd9===null||_0x4f2cd9===void 0x0?void 0x0:_0x4f2cd9[a6_0x6d32('0x2b')])===null||_0x30a27d===void 0x0?void 0x0:_0x30a27d[a6_0x6d32('0x1a')])?(0x0,metric_logger_1[a6_0x6d32('0x27')])(_0x4f2cd9[a6_0x6d32('0x2b')][a6_0x6d32('0x1a')]):metric_logger_1[a6_0x6d32('0x2e')]);}});}}exports['DistributedExecutionApi']=DistributedExecutionApi;function createStartRequest(_0x22042e,_0x7ec69c,_0x401284){const _0x2887f8=_0x7ec69c['map'](_0x16dda5=>{return _0x16dda5[a6_0x6d32('0xe')](_0x3dfa92=>{return{'taskId':_0x3dfa92['id'],'hash':_0x3dfa92[a6_0x6d32('0x2f')],'projectName':_0x3dfa92[a6_0x6d32('0xa')][a6_0x6d32('0x20')],'target':_0x3dfa92[a6_0x6d32('0xa')][a6_0x6d32('0xa')],'configuration':_0x3dfa92[a6_0x6d32('0xa')][a6_0x6d32('0x2')]||null,'params':unparse(_0x3dfa92[a6_0x6d32('0x3')])[a6_0x6d32('0x9')]('\x20')};});});const _0x5eb35a={'command':(0x0,environment_1[a6_0x6d32('0x17')])(),'branch':(0x0,environment_1['getBranch'])(),'runGroup':_0x22042e,'tasks':_0x2887f8,'maxParallel':calculateMaxParallel(_0x401284)};if(environment_1[a6_0x6d32('0x21')]){_0x5eb35a[a6_0x6d32('0x1')]=environment_1[a6_0x6d32('0x21')];}if(!environment_1[a6_0x6d32('0xf')]){_0x5eb35a[a6_0x6d32('0x5')]=![];}return _0x5eb35a;}exports[a6_0x6d32('0x1c')]=createStartRequest;function calculateMaxParallel(_0x4aab40){if(_0x4aab40[a6_0x6d32('0x15')]===a6_0x6d32('0x8')||_0x4aab40[a6_0x6d32('0x15')]===![]){return 0x1;}else if(_0x4aab40['parallel']==='true'||_0x4aab40[a6_0x6d32('0x15')]===!![]){return Number(_0x4aab40[a6_0x6d32('0x25')]||0x3);}else if(_0x4aab40[a6_0x6d32('0x15')]===undefined){return _0x4aab40[a6_0x6d32('0x25')]?Number(_0x4aab40[a6_0x6d32('0x25')]):0x3;}else{return Number(_0x4aab40[a6_0x6d32('0x15')])||0x3;}}